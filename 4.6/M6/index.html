<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Language" content="en-us" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" title="main" media="screen" />
<title>Eclipse Project Neon (4.6) M6 News</title>
</head>
<body>
<h1>Eclipse Project Neon (4.6) M6 - New and Noteworthy</h1>
<p>Here are some of the more noteworthy things available in the Neon milestone build M6
  which is now available for <a href="http://download.eclipse.org/eclipse/downloads/#4.6_Stable_Build" target="_top">download</a>.
  <br/>
  We also recommend to read the Tips and Tricks, either via <b>Help &gt; Tips and Tricks...</b> or online for
  <a href="http://help.eclipse.org/topic/org.eclipse.platform.doc.user/tips/platform_tips.html">Platform</a>,
  <a href="http://help.eclipse.org/topic/org.eclipse.jdt.doc.user/tips/jdt_tips.html">JDT</a>, and
  <a href="http://help.eclipse.org/topic/org.eclipse.pde.doc.user/tips/pde_tips.htm">PDE</a>.
</p>

<ul>
  <li><a href="#Platform">Platform</a></li>
  <li><a href="#JDT">JDT</a></li>
  <li><a href="#PDE">PDE</a></li>
  <li><a href="#Platform-Dev">Platform Developers</a></li>
  <li><a href="#Equinox">Equinox</a></li>
</ul>

<table class="news">
  <colgroup>
    <col class="title" />
    <col />
  </colgroup>

  <tr>
    <td id="Instructions" class="section" colspan="2">
      <h2>Instructions</h2>
    </td>
  </tr>

  <tr id="item-name">
    <td class="title">News item title and description</td>
    <td class="content">
        The whole entry should be a blurb pitched to the Eclipse end user community
        (not just to members of the Eclipse Platform development team).
      <p>
        The title should be short and snappy, written in
        <a href="https://en.wikipedia.org/wiki/Letter_case#Case_styles">sentence case</a>, and using
        "<a href="https://en.wikipedia.org/wiki/Headlinese#Syntax">headlinese</a>" (compressed style).
        The title should <em>not</em> use trailing
        punctuation and a unique id attribute on the &lt;tr&gt; HTML element.
      </p>
      <p>
        In the news description, tell
        users about changes they'll see in the UI. Tell component writers
        about changes they'll see at the client- and server-side APIs. Try to
        generate some excitement; save the boring details for the manual; be short and don't repeat yourself. The
        description should be complete sentences, with trailing punctuation.
      </p>
      <p>Make the entry self-contained and mention API classes.
        Do <em>not</em> link to bugs and don't promote individuals or third-party products.
      </p>
      <p>Use active voice (say "you", not "the user"), and follow other advice in the
        <a href="http://wiki.eclipse.org/Eclipse_Doc_Style_Guide#topic-content">Topic&nbsp;Content</a>
        section of the Eclipse Doc Style Guidelines.
      </p>
      <p>Stick to the default font and size. Make command names (<b>Quick Fix</b>),
        keyboard shortcuts (<b>Ctrl+1</b>), and preference page paths
        (<b>Preferences &gt; General &gt; Keys</b>) bold.
      </p>
      <p>Do <em>not</em> enclose the first paragraph of an item in <code>&lt;p&gt;&lt;/p&gt;</code> tags.
      </p>
      <p>See entries in <a href="../index.html">published</a> news documents for correct examples. These published news entries have been already reviewed, while
         entries in the evolving document may still contain errors.
      </p>
    </td>
  </tr>

  <tr id="screenshots">
    <td class="title">Screenshots</td>
    <td class="content">
        If a small image sheds light, place it below the description, in a separate
        paragraph. As the majority of the Eclipse users uses Windows 7, regular screen snapshots
        should be done on Windows 7 if possible, but screenshots from
        other operating system are also acceptable. Crop
        out any extraneous stuff to focus the reader's attention on your new
        feature. The image should be
        <b>no more than 520 pixels wide</b> and in <b>PNG</b> format (as opposed
        to GIF, TIF, BMP, or JPG). Use PNG-8 if your image doesn't have a lot of color,
        or PNG-24 if the screen shot uses enough color to warrant additional color depth.
        See also the
        <a href="http://wiki.eclipse.org/Eclipse_Doc_Style_Guide#graphics">Graphics</a>
        section of the Eclipse Doc Style Guidelines.
      <p>The Windows <b>Snipping Tool</b> actually saves to PNG on Windows 7 and can easily be
        used to crop and save screenshots:</p>
      <ul>
        <li>Arrange the windows for the shot</li>
        <li>Use the Windows <b>Snipping Tool</b> to capture part of the screen</li>
        <li>Use <b>File &gt; Save As</b> to save the screenshot as a PNG</li>
        <li>Overlays such as red circles or boxes to call out details can be done using Microsoft Paint</li>
      </ul>
      <p>Name the file in a way that is appropriate and specific to the item
        (e.g., key-bindings.png, rather than something generic like image.png).
        Use all <b>lowercase</b> letters in the image file name, including the &quot;<b>.png</b>&quot;
        file extension. As a separator, use <b>hyphen</b> &quot;-&quot; rather than
        underscore
        &quot;_&quot;. </p>
      <p>Put all the images in a sibling directory named &quot;images&quot;.
        This gives XHTML like:<br/>
        <code>&lt;img src=&quot;images/foo-view.png&quot; alt=&quot;&quot;/&gt;</code><br/>
        Include a suitable <a href="http://www.w3.org/TR/html4/struct/objects.html#h-13.8"><code>alt</code></a> attribute.
        The alt text should be empty ("") if the image just illustrates the text.
        Only use the alt text to add information that is not accessible if the page is rendered without images.
        Don't write <code>alt="Screenshot of <i>the XY dialog</i>"</code>. Blind users shouldn't have to skip useless repetitions.</p>
      <p>If the <code>alt</code> attribute text cannot sufficiently replace the image contents
        (e.g. for a screenshot that shows source code), then enclose the img element in a link
        to a plain &quot;.txt&quot; file with the same name as the image:<br/>
        <code>&lt;a href=&quot;images/foo-view.txt&quot;&gt;&lt;img ...</code></p>
      <p>The images should be left-justified (as opposed to centered). Do not embed the width and height of the image.</p>
      <p>
        <img src="https://www.eclipse.org/artwork/images/v2/logo-800x188.png" alt="" />
      </p>
      <script type="text/javascript">
      //<![CDATA[
      document.addEventListener('load', function markOversizedImages() {
        var imgs = document.getElementsByTagName("img");
        for (var i = 0; i < imgs.length; i++) {
          var img = imgs[i];
          var w = window.getComputedStyle(img, null).getPropertyValue("width");
          if (parseInt(w, 10) > 520) {
            img.style.width = "300px";
            var filter = "sepia(0.5) blur(2px)";
            img.style.filter = filter;
            img.style.webkitFilter = filter;
            var msg = document.createElement("div");
            msg.innerHTML = "Image too big. See Instructions &gt; <a href='#screenshots'>Screenshots</a>.<br>"
                + img.getAttribute("src") + ": width=" + w;
            msg.style.color = "red";
            msg.style.fontWeight = "bold";
            img.parentElement.insertBefore(msg, img);
          }
        }
      }, true);
      //]]>
      </script>
    </td>
  </tr>
  <tr id="validation">
    <td class="title">Validation</td>
    <td class="content">
        Use the W3C <a href="http://validator.w3.org/#validate_by_input">XHTML
        Markup Validation Service</a> to check your document's markup before
        submitting.
    </td>
  </tr>
   <tr id="css">
    <td class="title">CSS styling</td>
    <td class="content">
        Do <em>not</em> change the style.css file without consulting with the Eclipse Platform project lead. The news entries are
        aggregated at the end of the development cycle and the CSS files need to be aligned.
    </td>
  </tr>


  <tr>
    <td colspan="2" class="section" id="Platform">Platform</td>
  </tr>
  
  <tr id="javax-annotation-package-dependency">
    <td class="title">Imports of the javax.annotation package no longer require a minimum version</td>
    <td class="content">
    	Plug-ins no longer require specifying a minimum package version when importing the <code>javax.annotation</code> package. 
    	The Eclipse runtime will resolve all components to the same version (JVM or provided by the Eclipse platform). 
    	<p>
    	This avoids a common error in Eclipse RCP implementations in which <code>@PostConstruct</code> 
    	was resolved to different classes in the bundle classpath.
    	This change is backwards compatible, i.e., a dependency with a minimum version still works correctly.
    	</p>
    </td>
  </tr>
  <tr id="word-selection-default-value">
    <td class="title">'word_selection' template variable with default values</td>
    <td class="content">
     The 'word_selection' variable, supported in editor and code templates, now allows you to specify a default value to use if the current text selection is empty.
    </td>
  </tr>
  <tr id="create-method-computed-value">
    <td class="title">New factory method for the creation of a ComputedValue</td>
    <td class="content">
		A <code>ComputedValue</code> is able to compute custom values from other tracked getters inside its <code>calculate</code> method.
	 	<p>Before this change you had to derive from <code>ComputedValue</code>, but the new <code>create</code> method, which expects a <code>Supplier&lt;T&gt;</code>
		allows you to create an instance of it by using a lambda expression.</p> <p>E.g, 
		</p>
		<pre>IObservableValue&lt;Integer&gt; listSizeObservable =
 		ComputedValue.create(() -> observableList.size());</pre>
	 	or 
	 	<pre>IObservableValue&lt;String&gt; fullNameObservable =
 		ComputedValue.create(() -> personFirstNameObservable.getValue() + " "
		 + personLastNameObservable.getValue());</pre>
	
		<p>
		More details about tracked getter can be found in the ObservableTracker's <code>getterCalled(IObservable)</code> method. Almost every IObervable's get methods are tracked getter. 
		</p>
    </td>
  </tr>


  <tr>
    <td colspan="2" class="section" id="JDT">JDT</td>
  </tr>

  <tr id="open-from-clipboard-shortcut">
    <td class="title">Ctrl+Shift+V invokes Open from Clipboard</td>
    <td class="content">
      <b>Ctrl+Shift+V</b> has been assigned to invoke <b>Open from Clipboard</b>.
      <p>
      On GTK+ this key binding was previously assigned to the <b>Display</b> command as a workaround for <b>Ctrl+Shift+D</b> not working.
      </p>
    </td>
  </tr>

  <tr id="null-analysis-generics">
    <td class="title">Improved null analysis with generics</td>
    <td class="content">
      The interplay of null annotations and generics has been improved in several regards.
      <p>
      The basic concepts had already been documented in the 
      <a href="http://help.eclipse.org/topic/org.eclipse.jdt.doc.user/tasks/task-using_null_type_annotations.htm%3Fcp=1_3_9_1_0%23generics">online help</a>,
      but not all that was documented was actually checked by JDT's null analysis. With the changes outlined below,
      null analysis based on type annotations is even more capable than previous versions.
      </p>
      <p><b>(1)</b> The <b>first batch of contributed improvements</b> implements what we call "pessimistic analysis for free type variables",
      	which affects <em>implementors</em> of generic types.
      </p>
      <p><a href="images/MyGenericImpl.java.txt"><img src="images/pessimistic-analysis.png" alt=""/></a></p>
      <p>In order to allow clients to instantiate such a generic class with either a <code>@NonNull</code> or a <code>@Nullable</code> type
      as substitution for the "free type variable" <code>&lt;T></code>, the implementation of that class must account for the worst in both directions:
      </p>
      <ul>
      <li>To anticipate a <code>@NonNull</code> type, each field typed to a free type variable must be initialized with a non-null value, and
      	passing <code>null</code> where <code>T</code> is expected is illegal</li>
      <li>To anticipate a <code>@Nullable</code> type, each dereference must be preceded by a null check.</li>
      </ul>
      <p>
      At the bottom of each problem hover you will find a link to the corresponding configuration option,
      should you like to change the severity of this diagnostic. Note that configurability is mainly
      given for smooth migration from previous JDT version; conceptually, problems detected by pessimistic
      analysis should be treated as errors, because they invalidate the null-guarantees given by a generic type.
      </p>
      <img src="images/configure-pessimistic-analysis.png" alt="configuration options for new diagnostics"/>
      <p><b>(2)</b> The <b>second improvement</b> concerns <em>consumption</em> of generic types from a library, more specifically:
      	invocations of library method whose return type is given by a free type variable.<br/>
      	If the library type is instantiated with a <code>@NonNull</code> type as the type argument,
      	we generally want to interpret the mentioned return type as non-null, too.
      	This is problematic only for some "legacy" methods, which may return <code>null</code> without declaring so.
      	The most prominent example is <code>java.util.Map.get(K)</code> (see also the news entry on
      	<a href="https://www.eclipse.org/eclipse/news/4.5/jdt.php#external-annotations">external annotations</a>,
      	which also demonstrates the clean solution to this issue).
      </p>
      <p>The analysis cannot see whether absence of a null annotation for such a return type is intentional
      (in the above sense of "free type variables"), or an omission that should be fixed.
      For that reason a new warning has been implemented to alert about this situation.
      </p>
      <a href="images/Client.java.txt"><img src="images/unsafe-nonnull-interpretation.png" alt=""/></a>
      <p>In the above example, both fields <code>list</code> and <code>map</code> provide <code>@NonNull String</code> as a
      type argument, hence the return types of both <code>get</code> methods are interpreted as non-null.
      For <code>List</code> this is desired, for <code>Map</code> it is a bug.
      </p>
      <p>The dilemma can be resolved by adding a (possibly empty) external annotation file (<code>.eea</code>)
      to each affected library class. By using an empty annotation file, the user signals that all types
      in this class should be interpreted verbatim (like in the <code>List</code> case - use with care).
      In the other case the missing <code>@Nullable</code> annotation should be added as an external annotation
      (like in the <code>Map</code> case).
      </p>
      <p>In a project that is not yet configured to use external annotations for the library in question,
      the warning is demoted to level "information". Generally, the severity of this problem is configured
      using the option right below the one mentioned above, titled <b>Unsafe '@NonNull' interpretation
      of free type variable from library</b>.</p>
      <p><b>(3)</b> <b>Finally</b>, a small utility class, <code>org.eclipse.jdt.annotation.Checks</code>, 
      has been included in the bundle <code>org.eclipse.jdt.annotation_2.1.0</code>
      containing helper methods for typical idioms for improving and documenting null safety.</p>
    </td>
  </tr>

  <tr id="remove-unnecessary-type-arguments">
    <td class="title">Clean Up to remove unnecessary type arguments</td>
    <td class="content">
      A new option to remove unnecessary type arguments has been added under the "Unnecessary Code" group of the Clean Up profile.
	 	<p>
          <img src="images/remove-unnecessary-type-arguments.png" alt="" />
        </p>
    </td>
  </tr>

  <tr>
    <td colspan="2" class="section" id="PDE">PDE</td>
  </tr>

  <tr id="ds-annotations">
    <td class="title">Support for OSGi Declarative Services Annotations</td>
    <td class="content">
    	OSGi Declarative Services provide a powerful mechanism for developing complex, service-oriented
    	applications. With proper tooling, annotations, which were added to Declarative Services
    	in version 1.2, make it easy to generate and maintain the required component descriptor files.
    	<p>
    	When enabled, PDE automatically generates and updates Declarative Services component 
    	descriptor files from appropriately annotated Java source. This is done without requiring 
    	any additional builder to be configured in your project.
    	</p>
    	<p>
    	When you annotate your component implementation classes with <code>@Component</code>, and any
    	reference bind methods with <code>@Reference</code>, PDE will validate your annotations
    	and generate the corresponding component descriptor files. Any errors discovered during validation
    	are highlighted and reported.
    	</p>
    	<p>
			<img src="images/ds-annotations.png" alt="" />
    	</p>
    	<p>
    	In addition, PDE will also maintain the project's MANIFEST.MF and build.properties file
    	-- generated component descriptor files are automatically added to the manifest
    	and included in the build.
		</p>
		<p>
		To enable this feature in your workspace, go to <b>Preferences &gt; Plug-in Development &gt; DS Annotations</b>
		and check <b>Generate descriptors from annotated sources</b>.
		</p>
    </td>
  </tr>
  <tr id="ds-annotations-template">
    <td class="title">Updated OSGi Declarative Services Example</td>
    <td class="content">
    	The OSGi Declarative Services Example now uses annotations.
    	<p>
    	Instead of creating a Component Definition file for each component class and adding it
    	to the manifest and build.properties, the wizard creates component classes annotated with
    	the appropriate DS annotations, which are then used by PDE to automatically generate
    	the corresponding component descriptor files.  
		</p>
    </td>
  </tr>


  <tr>
    <td colspan="2" class="section" id="Platform-Dev">Platform Developers</td>
  </tr>

  <tr id="first-item-platform-dev">
    <td class="title">First item</td>
    <td class="content">
      Item blurb.
    </td>
  </tr>


  <tr>
    <td colspan="2" class="section" id="Equinox">Equinox</td>
  </tr>

  <tr id="first-item-equinox">
    <td class="title">First item</td>
    <td class="content">
      Item blurb.
    </td>
  </tr>


  <tr>
    <td colspan="2"/>
  </tr>
</table>

<p>The above features are just the ones that are new since the previous milestone
build. Summaries for earlier Neon milestone builds:</p>
<ul>
  <li><a href="https://www.eclipse.org/eclipse/news/4.6/M5/">News for Eclipse Neon milestone build M5</a></li>
  <li><a href="https://www.eclipse.org/eclipse/news/4.6/M4/">News for Eclipse Neon milestone build M4</a></li>
  <li><a href="https://www.eclipse.org/eclipse/news/4.6/M3/">News for Eclipse Neon milestone build M3</a></li>
  <li><a href="https://www.eclipse.org/eclipse/news/4.6/M2/">News for Eclipse Neon milestone build M2</a></li>
  <li><a href="https://www.eclipse.org/eclipse/news/4.6/M1/">News for Eclipse Neon milestone build M1</a></li>
</ul>

</body>
</html>
